async function downloadBlob(e){e.preventDefault();try{const t=new URL(e.currentTarget.dataset.source||e.currentTarget.href),o=await fetch(t.toString());if(!o.ok)throw new Error("Fetch failed");const n=await o.blob(),r=window.URL.createObjectURL(n),a=t.pathname.split("/"),c=decodeURIComponent(a.pop()||a.pop()),d=document.createElement("a");d.href=r,d.download=c,d.style.display="none",document.body.appendChild(d),d.click(),d.remove(),window.URL.revokeObjectURL(r)}catch(e){console.error("There has been a problem downloading the blob:",e)}}const modeSwitcher=function(){const e=window.matchMedia("(prefers-color-scheme: dark)");function t(e){const t=e?"dark":"light";document.documentElement.setAttribute("data-theme",t),document.getElementById("theme-toggle").title=e?"Toggle Light Mode":"Toggle Dark Mode",document.querySelectorAll(".twitter-tweet").forEach((e=>{e.setAttribute("data-theme",t)})),document.querySelectorAll("[data-tweet-id]").forEach((e=>{const o=new URL(e.getAttribute("src"));o.searchParams.set("theme",t),e.setAttribute("src",o.toString())}))}const o=sessionStorage.getItem("theme");return t("dark"===o||"light"!==o&&e.matches),e.addEventListener("change",(e=>{t(e.matches),sessionStorage.removeItem("theme"),"undefined"!=typeof DISQUS&&DISQUS.reset({reload:!0})})),function(){const o=sessionStorage.getItem("theme");let n;n="dark"!==o&&("light"===o||!e.matches),sessionStorage.setItem("theme",n?"dark":"light"),t(n),"undefined"!=typeof DISQUS&&DISQUS.reset({reload:!0})}}();!function(){const e=document.getElementById("pull"),t=document.querySelector("nav ul");["click","touch"].forEach((o=>{e?.addEventListener(o,(()=>{t.classList.toggle("hide")}),!1)}));const o=document.getElementById("main");if(o){let e=0,t=0;if("cover"==o.style.backgroundSize){const r=o.style.backgroundImage.replace(/url\((['"])?(.*?)\1\)/gi,"$2").split(",")[0];var n=new Image;n.onload=()=>{t=n.naturalHeight,e=n.naturalWidth/n.naturalHeight},n.src=r}window.addEventListener("scroll",(()=>{const n=o.offsetWidth/o.offsetHeight;let r=0;if(n>e&&(r=-(window.scrollY||document.body.scrollTop),t>0)){const o=t*(e/n)-t;r=Math.max(r,o)}o.style.backgroundPosition="center "+r/3+"px"}))}}();