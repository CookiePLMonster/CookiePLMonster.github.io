<div id="disqus_thread"></div>
<script>
const observer = new IntersectionObserver((entries, observer) => {
	entries.forEach((entry) => {
		if (entry.isIntersecting) {

            var disqus_shortname = '{{ site.theme_settings.disqus_shortname }}';
            (function() {
            var d = document, s = d.createElement('script');
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
            })();

+			observer.unobserve(entry.target);
		}
	});
});

// Start listening:
const mountNode = document.querySelector("#disqus_thread");
observer.observe(mountNode);
</script>
<noscript>{{ site.theme_settings.str_javascript_required_disqus }}</noscript>
